It's getting too much to cope and I don't know what to do

I have a long-ish history of unhappiness  and just general depression and anxiety. It was a really tough battle and I was suicidal for a while. I was put of medication and on a waiting list for therapy and most of my depression seemed to go.

But the thing is that recently things have been creeping in again like it did before. And now I'm getting paranoid about what people think of me and isolating myself and thinking about self punishment and things. For the past few days I have eaten one meal a day and I'm not sure why I started doing that again but I just did. And yeah, punishment feels good and so does telling yourself you don't deserve food.

I just came back today though and I feel really bad. I think I fell out with a friend, and because of this I've been isolated from a group of friends. The reason it happened is because this friend got angry and I don't like it when people are angry, so I kept away from him and then something petty happened that will probably be blamed on me.

I do feel quite lonely right now and I don't know what to do with myself. I don't want to go down the same road as before where I couldn't leave my house and I wanted to die and I just feel like it's coming back and I can't stop it.