Don't really know what to do anymore

I'm a 20 year old guy living in England and I've been really depressed for a few months. In the past I have had lon periods of depression

All my life I've felt like I wasn't good enough to achieve or mean anything. I had a pretty rough childhood with a lot of domestic abuse against my mother from an alcholic father, pretty sure that's what caused me to comfort eat, and as a result get pretty fat and bullied for it.

School was always tough because of my weight, the bullying I recieved made me a recluse, and has still damaged by ability to socialise to this day. Because of my weight I never really experienced any romance and to this day I'm a virgin, something which makes me feel like a failure and unnatractive. I just feel so sad that I have never had someone love me in that way.

Eventually I discovered that I was bisexual, another thing which has crushed me a bit is that my dad is really not supportive of it, he knows I've liked boys before but still makes quite homophobic comments

My main problem now is feelings i have for one of my friends (who happens to be straight and on my course at uni), for 2 years I have been in love with him, hoping he would reciprocate eventually. He's a great guy and I wouldn't want to ruin our friendship so I haven't made any advances.
Recently I began trying to become friendly with a girl we met through a mutual friend, for a while I thought there as something there, but rwice now she has ended up kissing my friend when I've been there.
Each time this happens I feel sick, each time it feels like I sink into a deeper depression. It really is soul crushing and makes me want to just cry for hours.

During this depression where I have genuinely wanted to throw myself under a train, I don't want to push my friends away by being a sob story all the time, but I can feel myself pushing them away with how upset I get. Suicide and self harm have been on my mind a lot recently, and I find myself turning to drink and smoking to try and numb myself.

I'm trying to get some CBT sorted out, but I can't see anyone till the 3rd of December.

I really don't know how to deal with this, as whiney as it sounds I feel like my life as been one dissapointment after another.